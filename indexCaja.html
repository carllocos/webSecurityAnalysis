<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <title>Caja Security Analysis</title>

    <script type="text/javascript" src="http://caja.appspot.com/caja.js">  </script>
    <!-- <script src="http://localhost:8000/thirdpartyCode.js"></script> -->

  </head>
  <body>

    <h1>Hello</h1>

    <div id="guestCode">
    </div>

    <script type="text/javascript">
    var sensitiveObj = {
      x: 42,
      y: 33
    }

    function alertGreeting(arg) {
      alert(arg)
    }

    </script>


    <script type="text/javascript">

    const scriptURL = "http://localhost:8000/thirdpartyCode.js"
      caja.whenReady(function (ev) {
          console.log("Ready!")
      })
      caja.initialize({
          debug: true
      })

      caja.load(undefined, undefined, function (frame) {

        caja.markFunction(alertGreeting);
        var tamedCoordinates = caja.tame(sensitiveObj)
        var tamedAlertGreeting = caja.tame(alertGreeting);

        frame.code(scriptURL, 'application/javascript')
              .api({ sayHello: tamedAlertGreeting, coordinates: tamedCoordinates})
              .run();
      })
    </script>
  </body>
</html>
